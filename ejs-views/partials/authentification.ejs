<div id="openModal" class="modalDialog">

      <div class="LogIn" id="LogIn">
        <center><h2>Ввійти в акаунт</h2>
        <label for="login"><p>Ім'я користувача</p></label>
        <input type="text" id="loginLog" name="login">
        <label for="password"><p>Пароль</p></label>
        <input type="password" id="passwordLog" name="password">
        <a title="Ввійти" class="close" id="LogBtn">Ввійти</a>

        <button class="button" onclick="showLoginForm()">Ввійти</button>
        <button class="button sign" onclick="showRegisterForm()">Зареєструватися</button></center>
    </div>
    
    <div class="SignUp" id="SignUp">
        <center><h2>Реєстрація</h2>
        <label for="login"><p>Ім'я користувача</p></label>
        <input type="text" id="loginSign" name="login">
        <label for="password"><p>Пароль</p></label>
        <input type="password" id="passwordSign" name="password">
        <label for="password"><p>Електронна пошта</p></label>
        <input type="email" id="email" name="email">
        <a title="Ввійти" class="close_sign" id="SignBtn">Зареєструватися</a>

        <button class="button" onclick="showLoginForm()">Ввійти</button>
        <button class="button sign" onclick="showRegisterForm()">Зареєструватися</button></center>

</div>
</div>
<style>
.button{
  font-family: 'Roboto Slab';
	background: #75855D;
  font-size: 18px;
	color: #FFFFFF;
	height: 50px;
	text-align: center;
	text-decoration: none;
	font-weight: 300;
	border-radius: 4px;
  width: 170px;
  margin-top: 50px;
  position: relative;
}  

.sign{
  background-color:  #A03E3E;

} 
.modalDialog {
  position: fixed;
  font-family: 'Roboto Slab';
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: rgba(0, 0, 0, 0.881);
  z-index: 99999;
  transition: opacity 400ms ease-in;
  display: none;
  pointer-events: none;

}

.modalDialog:target {
	display: block;
	pointer-events: auto;
    
}

.LogIn{
  display: block;
	width: 400px;
  height: 285px;
	position: relative;
	margin: 10% auto;
	padding: 5px 20px 13px 20px;
	border-radius: 4px;
	background: #f8f8f8;

}
.SignUp{
  display: none;
  width: 400px;
  height: 370px;
	position: relative;
	margin: 10% auto;
	padding: 5px 20px 13px 20px;
	border-radius: 4px;
	background: #f8f8f8;
}
.close_sign{
  width: 160px;
  display: flex;
  justify-content: space-around;
  align-items: center;
	background:  #A03E3E;
	color: #FFFFFF;
	height: 33px;
	text-align: center;
	text-decoration: none;
	font-weight: 300;
	border-radius: 4px;
	box-shadow: 1px 1px 3px #000;
  margin-top: 30px;
}
.close_sign:hover { 
  background-color: #623838;
  color: rgb(224, 224, 224);
}
.modalDialog input{
  height: 20px;
  border: 2px solid #636363;
  border-radius: 3px;
  margin: 0;
}
.close {
  display: flex;
  justify-content: space-around;
  align-items: center;
	background: #75855D;
	color: #FFFFFF;
	height: 33px;
	text-align: center;
	text-decoration: none;
	font-weight: 300;
	border-radius: 4px;
	box-shadow: 1px 1px 3px #000;
  width: 85px;
  margin-top: 30px;
}
.close:hover { 
  background-color: #484f3d;
  color: rgb(224, 224, 224);
}
.modal-front {
  background-color: #f1f1f1;
  transform: rotateY(0deg);
}

.modal-back {
  background-color: #e9e9e9;
  transform: rotateY(180deg);
  transform-origin: right;
}

.modal-card.flipped .modal-front {
  transform: rotateY(-180deg);
}

.modal-card.flipped .modal-back {
  transform: rotateY(0deg);
}

</style>

<script>
function showRegisterForm() {
  let signUp = document.getElementById("SignUp")
  let logIn = document.getElementById("LogIn")

  signUp.style.display = "block"
  logIn.style.display = "none"
}

function showLoginForm() {
  let signUp = document.getElementById("SignUp")
  let logIn = document.getElementById("LogIn") 
  
  logIn.style.display = "block"
  signUp.style.display = "none"
}


//--------------
let logined = false
let loginedUser = {}
const usernameLog = document.getElementById('loginLog')
const passwordLog = document.getElementById('passwordLog')
const usernameSign = document.getElementById('loginSign')
const passwordSign = document.getElementById('passwordSign')
const email = document.getElementById('email')
const LogBtn = document.getElementById('LogBtn')
const SignBtn = document.getElementById('SignBtn')
const modal = document.getElementById("openModal")
let users = {
  users: [
    {
      "_id": {
        "$oid": "645a13b816f29c2395c5e7cc"
      },
      "username": "MaxKorop",
      "password": "@K23_M02_A05",
      "e_mail": "makskorop99@gmail.com",
      "tickets": [],
      "status": true
    },
    {
      "_id": {
        "$oid": "645a13b816f29c2395c5e7cd"
      },
      "username": "AnutkaGn",
      "password": "$_AN5&das_34",
      "e_mail": "annaartemivna@gmail.com",
      "tickets": [],
      "status": true
    }
  ]
}


LogBtn.addEventListener('click', () => {
  if (passwordLog.value.length < 8 ){
    alert('Ви ввели короткий пароль, він має бути не менше 8 символів в довжину')
  }
  else if (usernameLog.value.includes('@') 
    || usernameLog.value.includes('!') 
    || usernameLog.value.includes('~') 
    || usernameLog.value.includes('?') 
    || usernameLog.value.includes('`') 
    || usernameLog.value.includes("'")){
      alert("Ім'я користувача не може містити наступний символів: \"@\", \"!\", \"?\", \"~\", \"`\", \"'\"")
  }
  else{
    console.log('else')
    users.users.forEach((user) => {
      if (usernameLog.value == user.username && passwordLog.value == user.password){
        logined = true
        loginedUser = {
          username: user.username,
          password: user.password,
          email: user.email
        }
        LogBtn.setAttribute("href", "#close")
      }
    })
    // const user = [usernameLog.value, passwordLog.value]

    // const url = `/user?user=${JSON.stringify(user)}`

    // fetch(url)
    //   .then(response => logined = true)
    //   .then(html => window.location.href = url)
    //   .catch(error => {console.error(error)})
  }
})

SignBtn.addEventListener('click', () => {
  if (passwordSign.value.length < 8 ){
    alert('Ви ввели короткий пароль, він має бути не менше 8 символів в довжину')
  }
  else if (usernameSign && usernameSign.value.includes('@') 
    || usernameSign.value.includes('!') 
    || usernameSign.value.includes('~') 
    || usernameSign.value.includes('?') 
    || usernameSign.value.includes('`') 
    || usernameSign.value.includes("'")){
      alert("Ім'я користувача не може містити наступний символів: \"@\", \"!\", \"?\", \"~\", \"`\", \"'\"")
  }
  else{
    console.log('else')
    
    SignBtn.setAttribute("href", "#close")
    users.users.push({
      "username": usernameSign.value,
      "password": passwordSign.value,
      "email": email.value,
      "tickets": [],
      "status": false
    })
    // const user = {username : usernameLog.value, password: passwordLog.value, email: email.value} 

    // const url = `/signUp`

    // fetch(url, {
    //   method: "POST",
    //   headers: {
    //     'Content-Type': 'application/json'
    //   },
    //   body: JSON.stringify(user)
    // })
    //   .then(response => logined = response)
    //   .catch(error => {console.error(error)})
  }
})
</script>